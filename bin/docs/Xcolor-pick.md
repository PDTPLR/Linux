## Исходный код

```bash
#!/usr/bin/env bash

#   ██╗  ██╗ ██████╗ ██████╗ ██╗      ██████╗ ██████╗ 
#   ╚██╗██╔╝██╔════╝██╔═══██╗██║     ██╔═══██╗██╔══██╗
#    ╚███╔╝ ██║     ██║   ██║██║     ██║   ██║██████╔╝
#    ██╔██╗ ██║     ██║   ██║██║     ██║   ██║██╔══██╗
#   ██╔╝ ██╗╚██████╗╚██████╔╝███████╗╚██████╔╝██║  ██║
#   ╚═╝  ╚═╝ ╚═════╝ ╚═════╝ ╚══════╝ ╚═════╝ ╚═╝  ╚═╝
# Color picker for X.
# Simple Script To Pick Color Quickly Using Gpick.
# Created By: https://github.com/rxyhn 

TEMP_DIR=/tmp/xcolor
MSG=${XDG_CACHE_HOME:-$HOME/.cache}/xcolor.msg
EXPIRE_TIME=5000

main() {
    # Получение HEX-кода цвета через Gpick
    HEX_COLOR=$(gpick -pso --no-newline)
    
    # Создание временной директории
    mkdir -p $TEMP_DIR
    
    # Удаление символа # из HEX-кода
    HEX="${HEX_COLOR#\#}"
    
    # Генерация имени файла
    FNAME="$TEMP_DIR/$HEX.png"
    
    # Создание образца цвета
    convert -size 100x100 xc:"$HEX_COLOR" "$FNAME"
    COLOR_CODE="$HEX_COLOR"

    # Копирование в буфер обмена
    printf %s "$COLOR_CODE" | xclip -sel c
    
    # Уведомление с образцом цвета
    notify-send -a XColor --icon="$FNAME" xcolor-pick "$COLOR_CODE" --expire-time="$EXPIRE_TIME"
}

main
```

---

### Подробный разбор скрипта `xcolor-pick`

#### **Назначение**
Скрипт позволяет быстро выбрать цвет из любого места на экране, сохранить его HEX-код в буфер обмена и отобразить уведомление с визуальным образцом цвета. Идеально подходит для дизайнеров, разработчиков и пользователей, работающих с цветовыми схемами.

---

### **Ключевые компоненты**

#### 1. **Зависимости**
Для работы скрипта необходимы:
- **gpick** — графический инструмент для выбора цвета.
- **imagemagick** (пакет `convert`) — генерация образца цвета.
- **xclip** — работа с буфером обмена.
- **libnotify** (пакет `notify-send`) — отображение уведомлений.

**Установка на Arch Linux:**
```bash
sudo pacman -S gpick imagemagick xclip libnotify
```

---

#### 2. **Переменные**
- `TEMP_DIR=/tmp/xcolor`  
  Временная директория для хранения образцов цветов.
- `MSG=${XDG_CACHE_HOME:-$HOME/.cache}/xcolor.msg`  
  Путь к файлу для сохранения истории цветов (не используется в текущей версии).
- `EXPIRE_TIME=5000`  
  Время отображения уведомления в миллисекундах (5 секунд).

---

#### 3. **Логика работы**
Функция `main()` выполняет следующие шаги:

1. **Выбор цвета через Gpick**  
   ```bash
   HEX_COLOR=$(gpick -pso --no-newline)
   ```
   - `-p`: Активирует пипетку для выбора цвета.
   - `-s`: Режим однократного выбора (программа завершается после выбора).
   - `-o --no-newline`: Выводит цвет в формате `#RRGGBB` без переноса строки.

2. **Подготовка директории**  
   ```bash
   mkdir -p $TEMP_DIR
   ```
   Создает `/tmp/xcolor`, если директория не существует.

3. **Обработка HEX-кода**  
   ```bash
   HEX="${HEX_COLOR#\#}"
   ```
   Удаляет символ `#` из значения цвета (например, `#FF0000` → `FF0000`).

4. **Создание образца цвета**  
   ```bash
   convert -size 100x100 xc:"$HEX_COLOR" "$FNAME"
   ```
   Генерирует PNG-изображение 100×100 пикселей выбранного цвета через ImageMagick.

5. **Копирование в буфер**  
   ```bash
   printf %s "$COLOR_CODE" | xclip -sel c
   ```
   Сохраняет HEX-код в системный буфер обмена (Ctrl+V).

6. **Визуальное уведомление**  
   ```bash
   notify-send -a XColor --icon="$FNAME" xcolor-pick "$COLOR_CODE"
   ```
   Показывает уведомление с:
   - Иконкой-образцом цвета.
   - Текстом HEX-кода.
   - Автором уведомления (`XColor`).

---

### **Особенности для Arch Linux**
1. **Пути к утилитам**  
   Все команды (`gpick`, `convert`, `xclip`, `notify-send`) доступны через официальные репозитории и находятся в стандартных путях (`/usr/bin/`).

2. **Интеграция с системой**  
   - Можно создать `.desktop`-файл для запуска из меню приложений.
   - Добавить хоткей в настройках окружения (KDE, GNOME) для быстрого вызова.

3. **Расширенные настройки**  
   - Чтобы сохранять историю цветов, добавьте запись в `$MSG`:
     ```bash
     echo "$COLOR_CODE" >> "$MSG"
     ```
   - Для автоматической вставки цвета в CSS-файл:
     ```bash
     echo ".color { background: $COLOR_CODE; }" | xclip -sel c
     ```

---

### **Пример использования**
1. Запустите скрипт в терминале:
   ```bash
   ./xcolor-pick
   ```
2. Наведите курсор на нужный цвет и кликните.
3. HEX-код автоматически скопируется в буфер.
4. В правом верхнем углу появится уведомление с образцом цвета.

---

### **Советы**
- Чтобы сделать скрипт глобально доступным:
  ```bash
  sudo cp xcolor-pick /usr/local/bin/
  chmod +x /usr/local/bin/xcolor-pick
  ```
- Для мгновенного вызова назначьте сочетание клавиш (например, `Super+C`) в настройках вашего DE.